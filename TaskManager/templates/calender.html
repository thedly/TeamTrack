{% extends "base.html" %}
{% load static %}
{% block extraHeaders %}

<link href='{% static 'css/fullcalendar/fullcalendar.css' %}' rel='stylesheet' />
<link href='{% static 'css/fullcalendar/fullcalendar.print.css' %}' rel='stylesheet' media='print' />
<script src='{% static 'js/fullcalendar/jquery.min.js' %}'></script>
<script src='{% static 'js/fullcalendar/jquery-ui.custom.min.js' %}'></script>
<script src='{% static 'js/fullcalendar/fullcalendar.min.js' %}'></script>
<script>

	$(document).ready(function() {
	
		var date = new Date();
		var d = date.getDate();
		var m = date.getMonth();
		var y = date.getFullYear();
		
		$('#calendar').fullCalendar({
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month,agendaWeek,agendaDay'
			},
			editable: false,
			events: [    
			         
			     {% for wup in WeeklyUpdates %}
			     {
			    	 title : '{{ wup.taskid.TaskTitle }}',
			     	 start: new Date({{ wup.date|date:"Y" }}, {{ wup.date|date:"m" }}-1, {{ wup.date|date:"d" }}),
			     	 url: '{% url "taskdetail" wup.taskid.id %}'
			     },
				
			     {% endfor %} 
			     
			     {% for pro in Projects %}
			     {
			    	 title : '{{ pro.Title }}',
			     	 start: new Date({{ pro.StartDate|date:"Y" }}, {{ pro.StartDate|date:"m" }}-1, {{ pro.StartDate|date:"d" }}),
			     	 end: new Date({{ pro.EndDate|date:"Y" }}, {{ pro.EndDate|date:"m" }}-1, {{ pro.EndDate|date:"d" }}),
			     	 url: '{% url "projectsdetail" pro.id %}'
			     },
				
			     {% endfor %} 
			     
			     
			     
				{
					title: 'All Day Event',
					start: new Date(y, m, 1)
				},
				{
					title: 'Long Event',
					start: new Date(y, m, d-5),
					end: new Date(y, m, d-2)
				},
				{
					id: 999,
					title: 'Repeating Event',
					start: new Date(y, m, d-3, 16, 0),
					allDay: false
				},
				{
					id: 999,
					title: 'Repeating Event',
					start: new Date(y, m, d, 16, 0),
					allDay: false
				},
				{
					title: 'Meeting',
					start: new Date(y, m, d, 10, 30),
					allDay: false
				},
				{
					title: 'Lunch',
					start: new Date(y, m, d, 12, 0),
					end: new Date(y, m, d, 14, 0),
					allDay: false
				},
				{
					title: 'Birthday Party',
					start: new Date(y, m, d, 19, 0),
					end: new Date(y, m, d, 22, 30),
					allDay: false
				},
				{
					title: 'Click for Google',
					start: new Date(y, m, d),
					end: new Date(y, m, d),
					url: 'http://google.com/'
				}
			]
		});
		
	});

</script>

<style>

	body {
		text-align: center;
		font-size: 14px;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		}

	#calendar {
		width: 900px;
		margin: 0 auto;
		}

</style>
{% endblock extraHeaders %}
{% block maincontent %}
<h3>Events</h3>
<a href="{% url 'Meetings' %}">Meetings</a>
<h3>Calender</h3>
<div id='calendar'></div>
{% endblock maincontent %}
